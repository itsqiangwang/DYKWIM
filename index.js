var initialismArr = [
  "NTN",
  "OATUS",
  "OFOC",
  "OOTD",
  "OSLT",
  "PDBAZ",
  "PLI",
  "PLOS",
  "PMIGBOM",
  "OMYMHMMFSWGAD",
  "PROPS",
  "QR",
  "QWERTYUIOP",
  "RMEAY",
  "RMR",
  "ROTFLMAOWPIMP",
  "SND",
  "SAM",
  "SALTS",
  "SBD",
  "SBI",
  "SHCOON",
  "SIWOTI",
  "SKI",
  "SMT",
  "SOHF",
  "SOIDH",
  "SSDD",
  "SUAKM",
  "SWAMBO",
  "SWIM",
  "SYOTOS",
  "TANSTAAFL",
  "TAU",
  "TFM2KAU2FO",
  "THX",
  "THNX",
  "TX",
  "THANKX",
  "TKS",
  "TNX",
  "TINALO",
  "TMF",
  "TMS",
  "TMSIDK",
  "TMTOWTDI",
  "TMTH",
  "TNOP",
  "TRDMC",
  "TTD",
  "TTIWWP",
  "URAPITA",
  "WIWWU",
  "WMMOWS",
  "WNDITWB",
  "WOMBAT",
  "WTHIGO?",
  "WWJD?",
  "WYSITWIRL",
  "YHGASP",
  "YKWRGMG",
  "YSMTU",
  "YWSYLS",
  "WDALYIC?",
  "WDYMBT?",
  "WIWWY?",
  "WWJBD?",
  "WYLABOCTGWTR?",
  "WYLASOMWTC?",
  "WYLSCWTW?",
  "YDG?",
  "ILYAAF",
  "ILYAAM",
  "IMAO",
  "IMWTK",
  "INBD",
  "INRS",
  "IOKIYAR",
  "IPN",
  "ITTET",
  "IYBTYBA",
  "IYD",
  "JAPAN",
  "JOOC",
  "KISS",
  "KTBSPA",
  "LIS",
  "LMAP",
  "LUL",
  "LUWAMH",
  "MAWOY",
  "MBA",
  "MMAMP",
  "MMI",
  "NHF",
  "NIMBY",
  "NKOTB",
  "NOYDB",
  "EEG",
  "EOTWAWKI",
  "FMDIDGAD",
  "FMTKFYTFO",
  "FMTYEWTK",
  "FTBOMH",
  "GIWIST",
  "GNSTDLTBBB",
  "GTM",
  "GUFN",
  "HGH",
  "HHWW",
  "HWSNBN",
  "IAWTCSO",
  "ICBINB",
  "IDGAD",
  "IDWTAI",
  "IG",
  "IGGY",
  "HSIT?",
  "IITUWUTMAS?",
  "IITYWIMIWHTKY?",
  "IITYWTMWYBMAD?",
  "IITYWTMWYKM?",
  "NMJCU?",
  "AKTF",
  "AINEC",
  "ALOTBSOL",
  "ANFAWFOS",
  "ATQ",
  "AWNP",
  "BAM",
  "BBFL",
  "BBEG",
  "BD",
  "BHD",
  "BIC",
  "BISLY",
  "BOGSAT",
  "BOOMM",
  "BSOFN",
  "BTDTGTTSAWIO",
  "BTWITIAILWY",
  "CMAR",
  "DAMHIK",
  "DFTBA",
  "DWISNWID",
  "ADN",
  "A/W",
  "A3",
  "AAB",
  "AAF",
  "AAK",
  "AAMOF",
  "AAP",
  "AAR",
  "AAT",
  "AAWY",
  "ASL?",
  "ASLP?",
  "AWHFY?",
  "AYFKMWTS?",
  "AYFR?",
  "AYFT?",
  "AYKM?",
  "AYL?",
  "AYPI?",
  "AYS?",
  "AYSOS?",
  "AYT?",
  "BU2M?",
  "BWTHDIK?",
  "CIHY?",
  "CYBI?",
  "DAE?",
  "DIC?",
  "DIKU?",
  "DIKY?",
  "DILLIC?",
  "DILLIGAD?",
  "DITYID?",
  "DTMS?",
  "DUCWIC?",
  "DUCY?",
  "DULM?",
  "DYHWIH?",
  "DYJHIW?",
  "DYK?",
  "DYKWIM?",
  "DYLM?",
  "DYLM?",
  "DYM?",
];

var spellOutArr = [
  "No thanks needed",
  "On a totally unrelated subject",
  "Overwhelming feelings of concern",
  "Outfit of the day",
  "Or something like that",
  "Please don't be a zombie",
  "Potential love interest",
  "Parents looking over shoulder",
  "Put mind in gear before opening mouth",
  "Pardon me, you must have mistaken me for someone who gives a damn",
  "Proper respect",
  "Queer",
  "Bored",
  "Rolling my eyes at you",
  "Remember",
  "Rolling on the floor laughing my ass off while peeing in my pants",
  "Search and destroy",
  "Stop annoying me",
  "Smiling a little then stopped",
  "Silent but deadly",
  "Surrounded by incompetence",
  "Shoot hot coffee out of nose",
  "Someone is wrong on the internet",
  "Spending kids' inheritance",
  "Sucking my teeth",
  "Sense of humor failure",
  "Screenshot or it didn't happen",
  "Same stuff, different day",
  "Shut up and kiss me",
  "She who always must be obeyed",
  "Someone who isn't me",
  "See you on the other side",
  "There ain't no such thing as a free lunch",
  "Thinking about you",
  "That's for me to know and you to find out",
  "Thanks",
  "Thanks",
  "Thanks",
  "Thanks",
  "Thanks",
  "Thanks",
  "This is not a legal opinion",
  "Too much forehead",
  "Too much swagger",
  "Tell me something I don't know",
  "There's more than one way to do it",
  "Too much to handle",
  "Totally not our problem",
  "Tears running down my cheeks",
  "Textually transmitted disease",
  "This thread is worthless without pictures",
  "You are a pain in the ass",
  "Wish I was with you",
  "Wash my mouth out with soap",
  "We never did it this way before",
  "Waste of money, brains, and time",
  "What the hell is going on?",
  "What would Jesus do?",
  "What you see is totally worthless in real life",
  "You have got a serious problem",
  "You know what really grinds my gears",
  "You so made that up",
  "You win some, you lose some",
  "Who died and left you in charge?",
  "What do you mean by that?",
  "What is wrong with you?",
  "What would Jason Bourne do?",
  "Would you like a bowl of cream to go with that remark?",
  "Would you like a saucer of milk with that comment?",
  "Would you like some cheese with that whine?",
  "You dig?",
  "I love you as a friend",
  "I love you as a mate",
  "In my arrogant opinion",
  "Inquiring minds want to know",
  "It's no big deal",
  "It's not rocket science",
  "It's okay if you're a republican",
  "I'm posting naked",
  "In these tough economic times",
  "If you believe that, you'll believe anything",
  "In your dreams",
  "Just always pray at night",
  "Just out of curiosity",
  "Keep it simple stupid",
  "Keep the backstreet pride alive",
  "Laughing in silence",
  "Leave me alone please",
  "Lame uncomfortable laugh",
  "Love you with all my heart",
  "May angels watch over you",
  "Married but available",
  "Meet me at my place",
  "Me, myself, and I",
  "No hard feelings",
  "Not in my backyard",
  "New kid on the block",
  "None of your damn business",
  "Extremely evil grin",
  "End of the world as we know it",
  "Frankly my dear, I don't give a dam",
  "For me to know, for you to find out",
  "Far more than you ever wanted to know",
  "From the bottom of my heart",
  "Gee, I wish I'd said that",
  "Good night, sleep tight, don't let the bed bugs bite",
  "Giggling to myself",
  "Grounded until further notice",
  "Haters gonna hate",
  "Holding hands while walking",
  "He who shall not be named",
  "I agree with this comment so much",
  "I can't believe it's not butter",
  "I don't give a damn",
  "I don't want to talk about it",
  "Ignorant",
  "Ignore",
  "How sad is that?",
  "If I tell you, will you tell me a secret?",
  "If I tell you what it means I have to kill you?",
  "If I tell you what this means will you buy me a drink?",
  "If I tell you what this means will you kiss me?",
  "Not much, just chilling, you?",
  "Always keep the faith",
  "And it's not even close",
  "Always look on the bright side of life",
  "And now for a word from our sponsor",
  "Answer the question",
  "All work, no play",
  "Below average mentality",
  "Best buds for life",
  "Big bad evil guy",
  "Big deal",
  "Bad hair day",
  "Believe it comrade",
  "But I still love you",
  "Bunch of guys sitting around talking",
  "Bored out of my mind",
  "Big smile on face now",
  "Been there, done that, got the T-shirt and wore it out",
  "By the way, I think I'm in love with you",
  "Cry me a river",
  "Don't ask me how I know",
  "Don't forget to be awesome",
  "Do what I say, not what I do",
  "Any day now",
  "Anyway",
  "Anytime, anywhere, anyplace",
  "Average at best",
  "Always and forever",
  "Alive and kicking",
  "As a matter of fact",
  "Always a pleasure",
  "At any rate",
  "All the times",
  "And also with you",
  "Age? Sex? Location?",
  "Age, sex, location, picture?",
  "Are we having fun yet?",
  "Are you fucking kidding me with this shit?",
  "Are you for real?",
  "Are you free today?",
  "Are you kidding me?",
  "Are you listening?",
  "And your point is?",
  "Are you serious?",
  "Are you stupid or something?",
  "Are you there?",
  "Been up to much?",
  "But what the heck do I know?",
  "Can I help you?",
  "Can you believe it?",
  "Does anybody else…?",
  "Do I care?",
  "Do I know you?",
  "Do I know you?",
  "Does it look like I care?",
  "Do I look like I give a darn?",
  "Did I tell you I’m depressed?",
  "Does that make sense?",
  "Do you see what I see?",
  "Do you see why?",
  "Do you love me?",
  "Do you hear what I hear?",
  "Don’t you just hate it when…?",
  "Did you know?",
  "Do you know what I mean?",
  "Do you love me?",
  "Do you like me?",
  "Do you mind?",
];

var totalQuestionNum = initialismArr.length;
var interrogationContainer = document.getElementById("interrogation-container");
var randomIndexArr = [];
var wifiStatus = "online";
console.log(wifiStatus);

// on load
function leftMsg() {
  var createLeftSpeechBubble = document.createElement("div");
  var leftMessageContainer = document.createElement("span");

  createLeftSpeechBubble.className = "left-speech-bubble";

  createLeftSpeechBubble.appendChild(leftMessageContainer);
  interrogationContainer.appendChild(createLeftSpeechBubble);

  var randomIndex = Math.floor(Math.random() * (totalQuestionNum - 1) + 1);
  if (wifiStatus == "offline") {
    leftMessageContainer.innerText = spellOutArr[[randomIndex]];
    leftMessageContainer.classList.add('speech-bubbles-offline');
    leftMessageContainer.style.backgroundColor = 'transparent';
    leftMessageContainer.style.color = 'black';
  } else if (wifiStatus == "online") {
    leftMessageContainer.innerText = initialismArr[[randomIndex]];
    leftMessageContainer.classList.remove('speech-bubbles-offline');
    leftMessageContainer.style.color = 'white';
  }
  randomIndexArr.push(randomIndex);

  console.log(randomIndexArr);

  interrogationContainer.scrollTop = interrogationContainer.scrollHeight;
}

function rightMsg() {
  var createRightSpeechBubble = document.createElement("div");
  var rightMessageContainer = document.createElement("span");

  createRightSpeechBubble.className = "right-speech-bubble";

  createRightSpeechBubble.appendChild(rightMessageContainer);
  interrogationContainer.appendChild(createRightSpeechBubble);

  var randomIndex = Math.floor(Math.random() * (totalQuestionNum - 1) + 1);
  if (wifiStatus == "offline") {
    rightMessageContainer.innerText = spellOutArr[[randomIndex]];
    rightMessageContainer.classList.add('speech-bubbles-offline');
    rightMessageContainer.style.backgroundColor = 'transparent';
    rightMessageContainer.style.color = 'black';
  } else if (wifiStatus == "online") {
    rightMessageContainer.innerText = initialismArr[[randomIndex]];
    rightMessageContainer.classList.remove('speech-bubbles-offline');
    rightMessageContainer.style.color = 'white';
  }
  randomIndexArr.push(randomIndex);

  console.log(randomIndexArr);

  interrogationContainer.scrollTop = interrogationContainer.scrollHeight;
}

const setRandomInterval = (intervalFunction, minDelay, maxDelay) => {
  let timeout;

  const runInterval = () => {
    const timeoutFunction = () => {
      intervalFunction();
      runInterval();
    };

    const delay =
      Math.floor(Math.random() * (maxDelay - minDelay + 1)) + minDelay;

    timeout = setTimeout(timeoutFunction, delay);
  };

  runInterval();

  return {
    clear() {
      clearTimeout(timeout);
    },
  };
};

setRandomInterval(leftMsg, 100, 5000);
setRandomInterval(rightMsg, 100, 5000);

// const rightInternval = setRandomInterval(rightMsg, 10, 5000);
// rightInternval.clear();

// convert all message to initialisms or spell-outs
function translateToInitialisms() {
  // turn all messages into initialisms (online)
  var allMessageContainers = document.querySelectorAll(
    "#interrogation-container span"
  );
  for (var i = 0; i < allMessageContainers.length; i++) {
    allMessageContainers[i].innerText = initialismArr[randomIndexArr[i]];
    allMessageContainers[i].style.removeProperty('background-color');
    allMessageContainers[i].style.removeProperty('color');
    allMessageContainers[i].classList.remove('speech-bubbles-offline');
  }
}

function translateToSpellOuts() {
  // turn all messages into spell-outs (offline)
  var allMessageContainers = document.querySelectorAll(
    "#interrogation-container span"
  );
  for (var i = 0; i < allMessageContainers.length; i++) {
    allMessageContainers[i].innerText = spellOutArr[randomIndexArr[i]];
    allMessageContainers[i].style.backgroundColor = 'transparent';
    allMessageContainers[i].style.color = 'black';
    allMessageContainers[i].classList.add('speech-bubbles-offline');
  }
}

var wifiOffSignal = document.getElementById("wifi-off-signal");

function onlineOfflineToggle() {
  window.addEventListener("offline", (e) => {
    wifiStatus = "offline";
    console.log(wifiStatus);
    translateToSpellOuts();
    wifiOffSignal.style.bottom = '-20vh';
    interrogationContainer.style.height = '100vh';
    interrogationContainer.scrollTop = interrogationContainer.scrollHeight;
  });

  window.addEventListener("online", (e) => {
    wifiStatus = "online";
    console.log(wifiStatus);
    translateToInitialisms();
    wifiOffSignal.style.bottom = '0vh';
    interrogationContainer.style.height = '80vh';
    interrogationContainer.scrollTop = interrogationContainer.scrollHeight;
  });
}

onlineOfflineToggle();

var wtfResponseArr = [
  // "The FBI compiled an internal 83-page guide to internet slang and released it publicly under the Freedom of Information Act request.",
  // "Toggle your Wi-Fi to read translations of these internet slangs put together by the FBI.",
  // "The FBI put together a guide to internet slang",
  // "woooah",
  'The',
  'FBI',
  'put',
  'together',
  'a',
  'guide',
  'to',
  'internet',
  'slang.',
  'Toggle',
  'your',
  'Wi-Fi',
  'to',
  'read',
  'between',
  'translations.'
];

var queryContainer = document.getElementById('query-container');
var queryArr = [
  "WTF?",
  "WDYM?",
];
var responseIndex = 0;

function wtf() {
  var sendButton = document.getElementById("wtf-button");
  // var randomQueryIndex = Math.floor((Math.random() * queryArr.length));  
  // queryContainer.innerText = queryArr[randomQueryIndex];

  sendButton.addEventListener("click", function () {
    var createRightSpeechBubble = document.createElement("div");
    var rightMessageContainer = document.createElement("p");

    createRightSpeechBubble.className = "right-speech-bubble";

    createRightSpeechBubble.appendChild(rightMessageContainer);
    interrogationContainer.appendChild(createRightSpeechBubble);

    randomQueryIndex = Math.floor((Math.random() * queryArr.length));  
    rightMessageContainer.innerText = queryArr[randomQueryIndex];  

    queryContainer.value = "";

    setTimeout(function () {
      var createLeftSpeechBubble = document.createElement("div");
      var leftMessageContainer = document.createElement("p");

      createLeftSpeechBubble.className = "left-speech-bubble";

      createLeftSpeechBubble.appendChild(leftMessageContainer);
      interrogationContainer.appendChild(createLeftSpeechBubble);

      // var randomResponseIndex = Math.floor((Math.random() * wtfResponseArr.length));
      // leftMessageContainer.innerText = wtfResponseArr[randomResponseIndex];  
      leftMessageContainer.innerText = wtfResponseArr[responseIndex];  
      responseIndex = responseIndex + 1;
      if (responseIndex == wtfResponseArr.length) {
        responseIndex = 0;
      }
      interrogationContainer.scrollTop = interrogationContainer.scrollHeight;
    }, 500);

    interrogationContainer.scrollTop = interrogationContainer.scrollHeight;
  });
}

wtf();
